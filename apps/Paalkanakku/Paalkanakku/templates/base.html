<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>பால் கணக்கு</title>

    <!-- For the bootstrap cdn and basic bootstrap js !-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <!-- For datatables !-->
    <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap4.min.js"></script>


</head>
<body>
    <ul class="nav">
      <li class="nav-link">
        <a href="{{url_for('core.index')}}">Home</a>
      </li>
      <li class="nav-link">
        <a href="{{url_for('core.info')}}">About</a>
      </li>

        {% if current_user.is_authenticated %}

      <!--li class="nav-link">
        <a href="{{url_for('customer.list_cust')}}">Customers</a>
      </li!-->

        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle"
                    type="button" id="dropdownMenuButton"
                    data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                    Customers
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="{{url_for('owner.add_own')}}">Add</a>
                <!--a class="dropdown-item" href="{{url_for('owner.remove_own')}}">Remove</a!-->
                <a class="dropdown-item" href="{{url_for('owner.list_own')}}">View</a>
            </div>
        </div>

        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle"
                    type="button" id="dropdownMenuButton"
                    data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                    Milkers
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="{{url_for('milker.add_milker')}}">Add</a>
                <!--a class="dropdown-item" href="{{url_for('milker.remove_milker')}}">Remove</a!-->
                <a class="dropdown-item" href="{{url_for('milker.list_milker')}}">View</a>
            </div>
        </div>

        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle"
                    type="button" id="custdropdownMenuButton"
                    data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                    MilkLedger
            </button>
            <div class="dropdown-menu" aria-labelledby="custdropdownMenuButton">
                <a class="dropdown-item" href="{{url_for('milk.add_daily_data',modified_day="None", milked_time="None")}}">Add</a>
                <!--a class="dropdown-item" href="{{url_for('customer.remove_cust')}}">Remove</a!-->
                <a class="dropdown-item" href="{{url_for('milk.milk_ledger_view',month="None")}}">View</a>
            </div>
        </div>

      <li class="nav-link">
        <a href="#">Tally</a>
      </li>

        <li class="nav-link">
        <a href="{{url_for('users.logout')}}">Log out</a>
      </li>
      <li class="nav-link">
        <a href="{{url_for('users.account')}}">Account</a>
      </li>
        {% else %}
      <li class="nav-link">
        <a href="{{url_for('users.login')}}">Log in</a>
      </li>
      <li class="nav-link">
        <a href="{{url_for('users.register')}}">Register</a>
      </li>
    </ul>
{% endif %}

    <div class="container">

        {% block content%}

        {% endblock %}

    </div>


<script>


polls = document.querySelectorAll('[id ^= "daily_data-"]');
Array.prototype.forEach.call(polls, callback);

function callback(element, iterator) {
    //console.log(element.id);
    document.getElementById(element.id).setAttribute("name",element.id);
}

function handler(e){
  //time = document.getElementsByName("milked_time");
  time = document.querySelector('input[name="milked_time"]:checked').value;

  console.log(time);
  date=document.getElementById("milked_date").value;
  console.log(date);
  debugger;
  location.href = "{{url_for('milk.add_daily_data', modified_day = 'date',milked_time='mt')}}".replace('date',date).replace('mt',time);
  //location.href = Flask.url_for('milk.add_daily_data'', {modified_day: e.target.value});
}


milker_id = document.querySelectorAll('[id $= "milker"]');
Array.prototype.forEach.call(milker_id, milker_id_change);

function milker_id_change(element, iterator) {
    console.log(element.attributes.option.nodeValue);
    console.log(element.attributes);
    debugger;
    console.log(element.attributes.option);
    $(element).val(element.attributes.option.nodeValue);
}


milked_time = document.querySelectorAll('[name ^= "milked_time"]');
Array.prototype.forEach.call(milked_time, milked_time_change);

function milked_time_change(element, iterator) {
    var host = window.location.href;
    console.log(window.location.href,window.location.href.slice(-2));
    if (host.slice(-2) == "pm" ){
        document.getElementById('milked_time-1').checked = true;
    }
    //debugger;
}

</script>

</body>
</html>